{% extends 'anonym/base.html.twig' %}

{% block body %}
<div class="flex flex-col items-center mt-8 mb-4"> <!-- Añadido mt-8 para el margen superior del contenedor -->
    <h1 class="font-heading text-3xl text-pistachio-500 text-center mb-4">Buscar Ubicación</h1>
    <div class="flex mb-4">
        <input type="text" id="location" placeholder="Ingresa una ubicación..." style="width: 600px;" class="border rounded-l-md px-4 py-2"> <!-- Ancho ajustado a 500px -->
        <button id="searchButton" class="bg-pistachio-600 text-white rounded-r-md px-4 py-2">Buscar</button>
    </div>

    <!-- Contenedor del mapa -->
    <div class="relative" style="width: 100%; height: 700px; padding: 60px;">
        <iframe height="100%" width="100%" class="rounded-xl"
            id="map"
            src="https://www.openstreetmap.org/export/embed.html?bbox=-104.39449310302736%2C19.049867681883935%2C-104.27381515502931%2C19.127085596640235&amp;layer=mapnik"></iframe>
    </div>
</div>
<div class="flex flex-col py-5 gap-3">
    <h1 class="font-heading text-3xl text-pistachio-500 text-center">COMENTARIOS</h1>
    <div class="flex flex-col gap-3 flex-1">
        {% for i in range(1, 10) %}
        <div class="border border-lochinvar-300 shadow rounded-md p-4 max-w-sm w-full mx-auto">
            <div class="animate-pulse flex space-x-4">
                <div class="rounded-full bg-lochinvar-700 h-10 w-10"></div>
                <div class="flex-1 space-y-6 py-1">
                    <div class="h-2 bg-lochinvar-700 rounded"></div>
                    <div class="space-y-3">
                        <div class="grid grid-cols-3 gap-4">
                            <div class="h-2 bg-lochinvar-700 rounded col-span-2"></div>
                            <div class="h-2 bg-lochinvar-700 rounded col-span-1"></div>
                        </div>
                        <div class="h-2 bg-lochinvar-700 rounded"></div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<script>
    document.getElementById('searchButton').addEventListener('click', function() {
        const locationInput = document.getElementById('location').value;
        const mapIframe = document.getElementById('map');

        // Aquí se debe hacer un reemplazo para codificar la ubicación en la URL del mapa
        const encodedLocation = encodeURIComponent(locationInput);

        // Este enlace es solo un ejemplo. Debes reemplazarlo con el enlace adecuado que te lleve al mapa.
        const newUrl = `https://www.openstreetmap.org/export/embed.html?bbox=-104.39449310302736%2C19.049867681883935%2C-104.27381515502931%2C19.127085596640235&layer=mapnik&marker=19.0889,-104.3348`;

        // Cambiar el src del iframe al nuevo enlace del mapa
        mapIframe.src = newUrl;
    });
</script>

{% endblock %}
